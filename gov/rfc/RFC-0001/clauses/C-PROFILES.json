{
  "clause_id": "C-PROFILES",
  "title": "CLI Profiles",
  "kind": "normative",
  "status": "active",
  "text": "The `pcp` CLI MUST expose a profile system using `--profile <name>`.\n\nThe implementation MUST provide at least these built-in profiles:\n- `modern` (default)\n- `safe`\n- `fast`\n\nThe implementation MAY provide additional built-in profiles.\n\nEach built-in profile MUST define defaults for at least:\n- conflict policy\n- metadata preservation policy\n- durability policy (`fsync` behavior)\n- symlink handling policy\n- output verbosity defaults\n\nUsers MAY override profile defaults with explicit flags. Explicit flags MUST take precedence over profile defaults.\n\nThe implementation MUST surface the effective configuration as follows:\n- For human output: when `--verbose` is set, emit one `effective configuration` block to `stderr` before item-level output.\n- If `--explain` is implemented, invoking it MUST emit one `effective configuration` block to `stderr` before item-level output.\n- For `--output json`: include a top-level `effective_config` object in the output document.\n- For `--output jsonl`: emit exactly one `effective_config` record before any item records.\n\nThe effective configuration payload MUST include at least:\n- `profile`\n- `conflict_policy`\n- `preserve_timestamps`\n- `preserve_permissions`\n- `fsync`\n- `symlink_mode`\n- `output_mode`\n\n**Rationale:**\nA profile contract gives users predictable defaults while retaining explicit control. A fixed surfacing contract makes behavior testable across human and machine interfaces.",
  "since": "0.1.0"
}
