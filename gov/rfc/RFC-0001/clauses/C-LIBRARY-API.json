{
  "clause_id": "C-LIBRARY-API",
  "title": "Library Planning and Execution API",
  "kind": "normative",
  "status": "active",
  "text": "The public library API MUST separate planning and execution concerns.\n\nThe library MUST expose:\n- a planning API that returns a concrete plan object (`CopyPlan` or equivalent)\n- an execution API that consumes a plan and returns a structured report (`CopyReport` or equivalent)\n- a policy model (`CopyPolicy` or equivalent) distinct from runtime/performance options (`RuntimeOptions` or equivalent)\n\nPublic library APIs MUST use typed enum errors as specified by [RFC-0001:C-ERROR-MODEL].\n\nExecution MUST provide typed events (enum/variant model) rather than string-only callbacks for operation lifecycle notifications.\n\nThe typed event stream MUST include at least:\n- item planned\n- item started\n- item completed\n- item skipped (with reason)\n- item failed (with structured error classification and stable `error_code`)\n\nThe existing ergonomic builder API MAY remain, but it SHOULD delegate to the plan/execute core APIs.\n\n**Rationale:**\nPlanning/execution separation improves testability and allows reusable plans, while typed events and typed errors enable robust integrations without fragile log parsing."
}
